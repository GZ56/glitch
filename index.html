<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('infinite-rain', {
        init: function () {
          let sceneEl = document.querySelector('a-scene');
          setInterval(() => {
            let raindrop = document.createElement('a-sphere');
            raindrop.setAttribute('radius', '0.05');
            raindrop.setAttribute('color', '#0000FF');
            let x = Math.random() * 20 - 10;
            let y = Math.random() * 10 + 10;
            let z = Math.random() * 20 - 10;
            raindrop.setAttribute('position', { x, y, z });
            raindrop.setAttribute('animation', {
              property: 'position',
              to: `${x} -5 ${z}`,
              dur: 3000,
              easing: 'linear',
            });
            sceneEl.appendChild(raindrop);
            // Remove the raindrop after it falls out of view
            setTimeout(() => {
              if (raindrop.parentNode === sceneEl) {
                sceneEl.removeChild(raindrop);
              }
            }, 3100); // Ensure it's removed after animation completes
          }, 20); // Increase frequency of rain generation
        },
      });

      AFRAME.registerComponent('infinite-clouds', {
        init: function () {
          let sceneEl = document.querySelector('a-scene');
          setInterval(() => {
            let cloud = document.createElement('a-circle');
            cloud.setAttribute('radius', '1');
            cloud.setAttribute('color', '#FFFFFF');
            cloud.setAttribute('rotation', '-90 0 0');
            let x = Math.random() * 20 - 10;
            let y = Math.random() * 10 + 10;
            let z = Math.random() * 20 - 10;
            cloud.setAttribute('position', { x, y, z });
            sceneEl.appendChild(cloud);
            // Remove the cloud after some time
            setTimeout(() => {
              if (cloud.parentNode === sceneEl) {
                sceneEl.removeChild(cloud);
              }
            }, 60000); // Adjust this value to control how long clouds last
          }, 2000); // Increase frequency of cloud generation
        },
      });

      AFRAME.registerComponent('infinite-trees', {
        init: function () {
          let sceneEl = document.querySelector('a-scene');
          setInterval(() => {
            let trunk = document.createElement('a-cylinder');
            trunk.setAttribute('radius', '0.2');
            trunk.setAttribute('height', '2');
            trunk.setAttribute('color', '#8B4513');
            let x = Math.random() * 20 - 10;
            let y = 1; // Trunk starts at half its height to be on the ground
            let z = Math.random() * 20 - 10;
            trunk.setAttribute('position', { x, y, z });
            sceneEl.appendChild(trunk);

            let foliage = document.createElement('a-sphere');
            foliage.setAttribute('radius', '1');
            foliage.setAttribute('color', '#228B22');
            foliage.setAttribute('position', { x, y: 2.5, z }); // Position foliage above the trunk
            sceneEl.appendChild(foliage);

            // Remove the tree after some time
            setTimeout(() => {
              if (trunk.parentNode === sceneEl) {
                sceneEl.removeChild(trunk);
              }
              if (foliage.parentNode === sceneEl) {
                sceneEl.removeChild(foliage);
              }
            }, 60000); // Adjust this value to control how long trees last
          }, 1000); // Increase frequency of tree generation
        },
      });
    </script>
  </head>
  <body>
    <a-scene infinite-rain infinite-clouds infinite-trees>
      <a-plane
        position="0 0 0"
        rotation="-90 0 0"
        width="40"
        height="40"
        color="#7BC8A4"
      ></a-plane>
      <a-sky color="#87CEEB"></a-sky>
    </a-scene>
  </body>
</html>
